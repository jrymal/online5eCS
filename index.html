<!DOCTYPE html>
<html lang="EN-US">
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <meta name="keywords" content="Character Sheet"/>
        <meta name="description" content="An online only Dungeons and Dragons 5th Edition character record sheet editor."/>
        <meta name="author" content="jrymal"/>
        <meta name="theme-color" content="#3367D6"/>

        <title>You have no Class!</title>

        <link rel="manifest" href="manifest.json">

        <link rel="icon" href="images/icons-192.png" sizes="192x192" />
        <link rel="icon" href="images/icons-512.png" sizes="512x512" />

        <script type="text/javascript" src="js/StaticUtil.js"> </script>
        <script type="text/javascript" src="js/Util.js" async> </script>
        <script type="text/javascript" src="js/DB.js" async> </script>
        <script type="text/javascript" src="js/Random.js" async> </script>
        <script type="text/javascript" src="js/Races.js" async> </script>
        <script type="text/javascript" src="js/Skills.js" async> </script>
        <script type="text/javascript" src="js/Classes.js" async> </script>
        <script type="text/javascript" src="js/Backstories.js" async> </script>
        <script type="text/javascript" src="js/Languages.js" async> </script>
        <script type="text/javascript" src="js/Coinage.js" async> </script>
        <script type="text/javascript" src="js/CharacterWizard.js" async> </script>
        <script type="text/javascript" src="js/Init.js" async> </script>
        <script type="text/javascript" src="js/Colors.js" async> </script>
        <script type="text/javascript" src="js/Dialogs.js" async> </script>

        <link rel="stylesheet" type="text/css" href="css/core.css" media="all" async/>

    </head>
    <body onload="init()" onbeforeunload="beforeUnload()" onhashchange="hashChange()">
        <noscript>
            <h1>This site requires Javascript</h1>
            <p>This site is a pure Javascript implementation of the Dungeons and Dragons 5th Edition Character generation. There are no plans to make it non-Javascript based at this time.</p>
        </noscript>
        <div id="rootNode" class="topContainer nocharacter">

            <section class="blankState">
                <h1>Online DnD Character Sheet</h2>
                <p>Please click on one of the links to begin creating your character.</p>
            </section>

            <nav class="nav nav-menu" role="navigation">
                <ul>
                    <li><a href="#createCharacter_player" onclick="return clearAllFields(document.getElementsByClassName('createCharacter')) && randomizeDataRNG();">Create a new Character</a></li>
                    <li><a href="#importFile">Load a character</a></li>
                    <li><a href="#" id="downloadCharacter">Download Character</a></li>
                    <li id="install-app" class="hidden"><a href="#" onClick="installApp()">Install as an App</a></li>
                </ul>
            </nav>

            <section class="stack header">
                <h1>
                    <span data-from="character.name.full" contentEditable="true" data-placeholder="None specified"></span>
                </h1>
            </section>
            
            <details class="stack playerInfo">
                <summary>Player: <span data-from="player.name"></span></summary>
                <dl>
                    <dt>Role Player</dt>
                    <dd><span data-from="player.name" contentEditable="true" data-placeholder="None specified"></span></dd>

                    <dt>Phone Number</dt>
                    <dd>
                    <span data-from="player.phone" id="player_phone_display" contentEditable="true" data-placeholder="None specified"></span>
                    <a target="_blank" id="player_phone_link"  href="tel:+" data-show-always="true"></a>
                    </dd>

                    <dt>Email</dt>
                    <dd>
                    <span data-from="player.email" id="player_email_display" contentEditable="true" data-placeholder="None specified"></span>
                    <a target="_blank" id="player_email_link" href="mailto:" data-show-always="true"></a>
                    </dd>
                </dl>
            </details>
            
            <dl class="stack fullWidth subdivided stats">
                <dt>Race</dt>
                <dd>
                <span  data-from="character.race"  data-lookup="RACES"></span>
                </dd>

                <dt>Alignment</dt>
                <dd>Society: <span data-from="character.alignment.society" ></span></dd>
                <dd>Morality: <span data-from="character.alignment.morality" ></span></dd>
            
                <dt>Size</dt>
                <dd data-from="RACE.size.simple" ></dd>

                <dt>Speed</dt>
                <dd  data-from="RACE.speed" ></dd>

                <dt>Class</dt>
                <dd class="marginless">
                    <table>
                        <caption>List of classes and levels</caption>
                        <thead>
                            <tr>
                                <th scope="col">Class</th>
                                <th scope="col">Level</th>
                                <th scope="col">Hit Die</th>
                            </tr>
                        </thead>
                        <tbody  data-from="character.class" >
                        </tbody>
                    </table>
                    <a href="#levelUp">Level Up</a>
                </dd>

                <dt>Experience Points</dt>
                <dd  data-from="character.experience"  ></dd>

                <dt>Hit Points</dt>
                <dd>
                    <!-- meter might be a better tag for this--> 
                    <span data-from="character.hitPoints.current" ></span>/<span data-from="character.hitPoints.max" ></span>
                </dd>

                <dt>Race Traits</dt>
                <dd  data-from="RACE.features" ></dd>

                <dt>Class Features</dt>
                <dd data-from="CALC.class.features" ></dd>
                <dd data-from="CALC.class.special" ></dd>

                <dt class="spell-req">Spells</dt>
                <dd class="spell-req"  data-from="RACE.spells" ></dd>
                <dd class="spell-req"  data-from="character.spells" ></dd>

                <dt>Saving Throw Bonus</dt>
                <dd  data-from="CALC.savingThrows" ></dd> 

                <dt>Proficiencies</dt>
                <dd  data-from="CALC.proficiency" ></dd>

                <dt>Skills</dt>
                <dd class="marginless">
                <table>
                    <caption>List of skills</caption>
                    <thead>
                        <tr>
                            <th scope="col">Name</th>
                            <th scope="col">Bonus</th>
                        </tr>
                    </thead>
                    <tbody  data-from="character.skills" >
                    </tbody>
                </table>
                </dd>
            
                <dt>Languages</dt>
                <dd  data-from="character.languages"  data-lookup="LANGUAGES"></dd>

                <dt>Inspiration</dt>
                <dd><label for="character_inspiration"><input type="checkbox" id="character_inspiration" name="character.inspiration"></input>Inspiration</label></dd>
            </dl>

            <table class="stack fullWidth attributes">
                <caption>Your character's Attribute values</caption>
                <thead>
                    <tr>
                        <th scope="col">Attribute Name</th>
                        <th scope="col">Natural (Race Modifier)</th>
                        <th scope="col">Total</th>
                        <th scope="col">Saving Throw Modifier</th>
                        <th scope="col">Passive Saving Throw</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">Strength</th>
                        <td >
                            <span data-from="character.attribute.strength" ></span>
                            <span class="parens" data-from="CALC.attribute.strength.raceModifier"  data-show-0="false"></span>
                        </td>
                        <td data-from="CALC.attribute.strength.total" ></td>
                        <td>
                            <span data-from="CALC.attribute.strength.savingThrow" ></span>
                            <span class="parens" data-from="CALC.attribute.strength.proficiencySavingThrow"  data-show-0="false"></span>
                        </td>
                        <td data-from="CALC.attribute.strength.passiveSavingThrow" ></td>
                    </tr>
                    <tr>
                        <th scope="row">Dexterity</th>
                        <td >
                            <span data-from="character.attribute.dexterity" ></span>
                            <span class="parens"data-from="CALC.attribute.dexterity.raceModifier"  data-show-0="false"></span>
                        </td>
                        <td data-from="CALC.attribute.dexterity.total" ></td>
                        <td>
                            <span data-from="CALC.attribute.dexterity.savingThrow" ></span>
                            <span class="parens" data-from="CALC.attribute.dexterity.proficiencySavingThrow"  data-show-0="false"></span>
                        </td>
                        <td data-from="CALC.attribute.dexterity.passiveSavingThrow" ></td>
                    </tr>  
                    <tr>
                        <th scope="row">Constitution</th>
                        <td >
                            <span data-from="character.attribute.constitution" ></span>
                            <span class="parens" data-from="CALC.attribute.constitution.raceModifier"  data-show-0="false"></span>
                        </td>
                        <td  data-from="CALC.attribute.constitution.total" ></td>
                        <td>
                            <span  data-from="CALC.attribute.constitution.savingThrow" ></span>
                            <span class="parens"  data-from="CALC.attribute.constitution.proficiencySavingThrow"  data-show-0="false"></span>
                        </td>
                        <td  data-from="CALC.attribute.constitution.passiveSavingThrow" ></td>
                    </tr>
                    <tr>
                        <th scope="row">Intelligence</th>
                        <td >
                            <span data-from="character.attribute.intelligence" ></span>
                            <span class="parens" data-from="CALC.attribute.intelligence.raceModifier"  data-show-0="false"></span>
                        </td>
                        <td  data-from="CALC.attribute.intelligence.total" ></td>
                        <td>
                            <span  data-from="CALC.attribute.intelligence.savingThrow" ></span>
                            <span class="parens"  data-from="CALC.attribute.intelligence.proficiencySavingThrow"  data-show-0="false"></span>
                        </td>
                        <td  data-from="CALC.attribute.intelligence.passiveSavingThrow" ></td>
                    </tr>
                    <tr>
                        <th scope="row">Wisdom</th>
                        <td >
                            <span data-from="character.attribute.wisdom" ></span>
                            <span class="parens" data-from="CALC.attribute.wisdom.raceModifier"  data-show-0="false"></span>
                        </td>
                        <td  data-from="CALC.attribute.wisdom.total" ></td>
                        <td>
                            <span  data-from="CALC.attribute.wisdom.savingThrow" ></span>
                            <span class="parens"  data-from="CALC.attribute.wisdom.proficiencySavingThrow"  data-show-0="false"></span>
                        </td>
                        <td  data-from="CALC.attribute.wisdom.passiveSavingThrow" ></td>
                    </tr>
                    <tr>
                        <th scope="row">Charisma</th>
                        <td >
                            <span data-from="character.attribute.charisma" ></span>
                            <span class="parens" data-from="CALC.attribute.charisma.raceModifier"  data-show-0="false"></span>
                        </td>
                        <td  data-from="CALC.attribute.charisma.total" ></td>
                        <td>
                            <span  data-from="CALC.attribute.charisma.savingThrow" ></span>
                            <span class="parens"  data-from="CALC.attribute.charisma.proficiencySavingThrow"  data-show-0="false"></span>
                        </td>
                        <td  data-from="CALC.attribute.charisma.passiveSavingThrow" ></td>
                    </tr>
                </tbody>
            </table>
            
            <dl class="stack fullWidth subdivided appearance">
                <dt>Sexuality</dt>
                <dd>Pronoun: <span data-from="character.sexuality.pronoun"  data-lookup="PRONOUNS"></span></dd>
                <dd>Biological Sex: <span data-from="character.sexuality.biologicalsex" 
                                                        data-lookup="BIOLOGICAL_SEX"></span></dd>
                <dd>Orientation: <span data-from="character.sexuality.sexualorientation"  data-lookup="SEXUAL_ORIENTATION"></span>
                </dd>


                <dt>Age</dt>
                <dd data-from="character.details.age"  ></dd>

                <dt>Height</dt>
                <dd data-from="character.details.height" ></dd>

                <dt>Weight (in lbs)</dt>
                <dd data-from="character.details.weight" ></dd>

                <dt>Purse</dt>
                <dd>
                <p><span data-from="character.purse" ></span></p>
                <a href="#purseUpdate">Edit</a>
                </dd>
                
                <dt>Equipment</dt>
                <dd  data-from="character.equipment" ></dd>
                <dd><a href="#equipment">Edit</a></dd>


                <dt>Treasure</dt>
                <dd><span  data-from="character.treasure"  contentEditable="true" data-placeholder="None Expressed"></span></dd>

                <dt>Backstory Type</dt>
                <dd data-from="character.backstory.type"  data-lookup="BACKSTORIES"></dd>
                
                <dt>Backstory</dt>
                <dd><span data-from="character.backstory.story"  contentEditable="true" data-placeholder="None Expressed"></span></dd>

                <dt>Appearance</dt>
                <dd><span data-from="character.details.appearance"  contentEditable="true" data-placeholder="None Expressed"></span></dd>
                
                <dd>Eye:
                    <span class="swatch tagAlong" id="character_details_eyecolor_color" data-lookup="EYE_COLOR"></span>
                    <span class="tagAlong" data-from="character.details.eyecolor"  data-lookup="EYE_COLOR"></span>
                </dd>
                <dd>Hair:
                    <span class="swatch tagAlong" id="character_details_hair_color" data-lookup="HAIR_COLOR"></span>
                    <span class="tagAlong" data-from="character.details.hair"  data-lookup="HAIR_COLOR"></span>
                </dd>
                <dd>Skin:
                    <span class="swatch tagAlong" id="character_details_skin_color" data-lookup="SKIN_COLOR"></span>
                    <span class="tagAlong" data-from="character.details.skin"  data-lookup="SKIN_COLOR"></span>
                </dd>


                <dt>Personality Traits</dt>
                <dd><span  data-from="character.personalitytraits"  contentEditable="true" data-placeholder="None Expressed"></span></dd>

                <dt>Ideals</dt>
                <dd><span  data-from="character.ideals"  contentEditable="true" data-placeholder="None Expressed"></span></dd>

                <dt>Bonds</dt>
                <dd><span  data-from="character.bonds"  contentEditable="true" data-placeholder="None Expressed"></span></dd>

                <dt>Flaws</dt>
                <dd><span  data-from="character.flaws"  contentEditable="true" data-placeholder="None Expressed"></span></dd>

                <dt>Allies</dt>
                <dd><span  data-from="character.allies"  contentEditable="true" data-placeholder="None Expressed"></span></dd>
            </dl>

            <footer class="footer" role="contentinfo">
                <p class="fullWidth footer"><em>I've been known to be wrong every once in a while. If you've found an Issue, <a rel="noopener" target="_blank" href="https://github.com/jrymal/online5eCS/issues/new">let me know!</a></em></p>
            </footer>

            <dialog class="modal" id="importFile">
                <div class="base" >
                    <h2>Load Character</h2>
                    <p class="description">Load your character</p>
                    <div class="height100 scrollable">
                        <table>
                            <caption>Listing of Characters to load or delete</caption>
                            <thead>
                                <tr>
                                    <th scope="col">Player</th>
                                    <th scope="col">Character</th>
                                    <th scope="col">Race</th>
                                    <th scope="col">Class</th>
                                    <th scope="col">Actions</th>
                                </tr>
                            </thead>
                            <tbody  id="DB_character" >
                            </tbody>
                        </table>
                    </div>
                    <div>
                    <label class="tagAlong" for="importFile_importFile">Import file</label>
                    <input class="tagAlong" type="file"  id="importFile_importFile"  name="importFile" onChange="loadFromJSON()"/>
                    </div>
                    <a href="#">Cancel</a>
                </div>
            </dialog>
            <dialog class="modal" id="purseUpdate">
                <div class="base">
                    <h2>Purse</h2>
                    <p class="description">I assume you are buying or accumulating your wealth....otherwise, why are you here?</p>
                    <div class="height100 scrollable">
                    
                        <p class="stack">Current Purse: <span data-from="character.purse"></span></p>

                        <label for="purse_value">Amount</label>
                        <input class="tagAlong short" type="number" name="purse_value" pattern="[0-9]*" id="purse_value"  min="0" max="9999999" value="0"/>
                        <select class="tagAlong" id="purse_type"  name="purse.type" aria-label="Coin type for amount">
                            <option value="COPPER">Copper</option>
                            <option value="SILVER">Silver</option>
                            <option value="ELECTRUM">Electrum</option>
                            <option value="GOLD">Gold</option>
                            <option value="PLATINUM">Platinum</option>
                        </select>

                        <label for="purse_description">Purchase Description</label>
                        <textarea  id="purse_description"  name="purse.description" spellcheck="true"></textarea>
                        <table>
                            <caption>Exchange Listing</caption>
                                <thead>
                                    <tr>
                                        <th scope="col">Coin</th>
                                        <th scope="col">Abbreviation</th>
                                        <th scope="col">Exchange</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th scope="row">Platinum</th>
                                        <td>PP</td>
                                        <td>1 PP = 100 SP</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">Gold</th>
                                        <td>GP</td>
                                        <td>1 GP = 10 SP</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">Electrum</th>
                                        <td>EP</td>
                                        <td>1 EP = 5 SP</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">Silver</th>
                                        <td>SP</td>
                                        <td>1 SP = ~1/2 day of labor</td>
                                    </tr>
                                    <tr>
                                        <th scope="row">Copper</th>
                                        <td>CP</td>
                                        <td>10 CP = 1 SP</td>
                                    </tr>
                                </tbody>
                            </table>


                    </div>
                    <div class="buttonbar">
                        <button onClick="usePurse('-')">Spend</button>
                        <button onClick="usePurse('+')">Gain</button> 
                        <a href="#">Done</a>
                    </div>
                </div>
            </dialog>
            <dialog class="modal" id="createCharacter_player" >
                <div class="base">
                    <h2>Create a new character</h2>
                    <p class="description">Load your character</p>
                    <p class="description notice">Any data input here is kept exclusively on your machine and is not shared to any services or databases.</p>
                    <form class="data-createCharacter entryPanel">
                        <fieldset>
                            <legend>Player Information</legend>
                            <label for="createCharacter_player_name" class="required">Role Player</label>
                            <input type="text" id="createCharacter_player_name"  name="player.name" required/>

                            <label for="createCharacter_player_phone">Phone Number</label>
                            <input type="tel" id="createCharacter_player_phone" name="player.phone" autocomplete="tel"/>

                            <label for="createCharacter_player_email">Email</label>
                            <input type="email" id="createCharacter_player_email" name="player.email" autocomplete="email"/> 
                        </fieldset>
                    </form>
                    <div class="buttonbar">
                        <a href="#">Cancel</a>
                        <a href="#" class="no-action">Previous</a>
                        <a href="#createCharacter_race" class="next">Next</a>
                    </div>
                </div>
            </dialog>
            <dialog class="modal" id="createCharacter_race" >
                <div class="base">
                    <h2>Create a new character</h2>
                    <p class="description">Load your character</p>
                    <form class="data-createCharacter entryPanel">
                        <fieldset>
                            <legend>Character Race and Sexuality Information</legend>
                            <label for="createCharacter_character_race">Race</label>
                            <select id="createCharacter_character_race"  name="character.race" data-lookup="RACES"></select>

                            <label for="createCharacter_character_pronoun">Pronoun</label>
                            <select id="createCharacter_character_pronoun" name="character.sexuality.pronoun" data-lookup="PRONOUNS"></select>
                            
                            <label for="createCharacter_character_biologicalsex">Biological Sex</label>
                            <select id="createCharacter_character_biologicalsex"  name="character.sexuality.biologicalsex"
                                data-lookup="BIOLOGICAL_SEX"></select>

                            <label for="createCharacter_character_sexualorientation">Sexual Orientation</label>
                            <select id="createCharacter_character_sexualorientation" name="character.sexuality.sexualorientation"
                                data-lookup="SEXUAL_ORIENTATION"></select>
                        </fieldset>
                    </form>
                    <div class="buttonbar">
                        <a href="#">Cancel</a>
                        <a href="#createCharacter_player" >Previous</a>
                        <a href="#createCharacter_alignment" class="next">Next</a>
                    </div>
                </div>
            </dialog>
            <dialog class="modal" id="createCharacter_alignment" >
                <div class="base">
                    <h2>Create a new character</h2>
                    <p class="description">Load your character</p>
                    <form class="data-createCharacter entryPanel">
                        <fieldset>
                            <legend>Character Alignment Information</legend>
                            <label for="createCharacter_character_alignment_society">Alignment (Attitude toward Society)</label>
                            <select id="createCharacter_character_alignment_society" name="character.alignment.society" data-rng="true">
                                <option value="Lawful">Lawful</option>
                                <option value="Neutral">Neutral</option>
                                <option value="Chaotic">Chaotic</option>
                            </select>
                            <label for="createCharacter_character_alignment_morality">Alignment (Morality)</label>
                            <select id="createCharacter_character_alignment_morality" name="character.alignment.morality" data-rng="true">
                                <option value="Good">Good</option>
                                <option value="Neutral">Neutral</option>
                                <option value="Evil">Evil</option>
                            </select>
                        </fieldset>
                    </form>
                    <div class="buttonbar">
                        <a href="#">Cancel</a>
                        <a href="#createCharacter_race" >Previous</a>
                        <a href="#createCharacter_name" class="next">Next</a>
                    </div>
                </div>
            </dialog>
            <dialog class="modal"  id="createCharacter_name" >
                <div class="base">
                    <h2>Create a new character</h2>
                    <p class="description">Load your character</p>
                    <form class="data-createCharacter entryPanel">
                        <fieldset>
                            <legend>Character Name</legend>
                            <label for="createCharacter_character_name_first" class="required">First Name</label>
                            <input type="text" id="createCharacter_character_name_first" name="character.name.first" required/>
                            <label for="createCharacter_character_name_family">Family Name</label>
                            <input type="text" id="createCharacter_character_name_family" name="character.name.family"/>
                            <label for="createCharacter_character_name_nickname">Nickname</label>
                            <input type="text" id="createCharacter_character_name_nickname" name="character.name.nickname"/>
                            <label for="createCharacter_character_name_child">Child Name</label>
                            <input type="text" id="createCharacter_character_name_child" name="character.name.child"/>
                        </fieldset>
                    </form>
                    <div class="buttonbar">
                        <a href="#">Cancel</a>
                        <a href="#createCharacter_race" >Previous</a>
                        <a href="#createCharacter_class" class="next">Next</a>
                    </div>
                </div>
            </dialog>
            <dialog class="modal" id="createCharacter_class" >
                <div class="base">
                    <h2>Create a new character</h2>
                    <p class="description">Load your character</p>
                    <form class="data-createCharacter entryPanel" id="createCharacter_class_form">
                        <fieldset class="createCharacter">
                            <legend>Character Class Information</legend>
                            <label for="createCharacter_character_class_type">Class</label>
                            <select id="createCharacter_character_class_type" data-lookup="CLASSES" name=""></select>

                            <label for="createCharacter_character_level" class="required">Level</label>
                            <input type="number" id="createCharacter_character_level" pattern="[0-9]*" class="short" min="1" max="40" value="1" required name=""/>

                            <button type="button" class="multiclass" onClick="addClass()">Add Class</button>
                            <table>
                                <caption>Classes choosen</caption>
                                <thead>
                                    <tr>
                                        <th scope="col">Class</th>
                                        <th scope="col">Level</th>
                                        <th scope="col">Remove</th>
                                    </tr>
                                </thead>
                                <tbody id="createCharacter_character_class_tbody">
                                </tbody> 
                            </table>
                        </fieldset>
                    </form>
                    <div class="buttonbar">
                        <a href="#">Cancel</a>
                        <a href="#createCharacter_name" >Previous</a>
                        <a href="#createCharacter_attr" class="next"
                            onclick="return postProcessStep($('createCharacter_class_form'))">Next</a>
                    </div>
                </div>
            </dialog>
            <dialog class="modal"  id="createCharacter_attr">
                <div class="base">
                    <h2>Create a new character</h2>
                    <p class="description">Load your character</p>
                    <form class="data-createCharacter entryPanel">
                        <fieldset class="column-2">
                            <legend>Character Attributes</legend>
                            <!-- generation options and execution -->
                            <label for="createCharacter_attr_chooser">How do you want your attributes set?</label>
                            <select id="createCharacter_attr_chooser" id="createCharacter_attr_chooser" name="">
                                <option value="Throwaway">Throwaway lowest of 4</option>
                                <option value="Straight">Straight 3 rolls</option>
                                <option value="Manual">I'll roll and enter the vaules</option>
                            </select>
                            <button type="button" onClick="generateAttributes()">Generate Attributes</button>

                            <label for="createCharacter_character_attribute_strength" class="required">Strength</label>
                            <input type="number" pattern="[0-9]*" name="character.attribute.strength" id="createCharacter_character_attribute_strength" class="short"  min="3" max="20" required/>
                            <label for="createCharacter_character_attribute_dexterity" class="required">Dexterity</label>
                            <input type="number" pattern="[0-9]*" name="character.attribute.dexterity" id="createCharacter_character_attribute_dexterity" class="short"  min="3" max="20" required/>
                            <label for="createCharacter_character_attribute_constitution" class="required">Constitution</label>
                            <input type="number" pattern="[0-9]*" name="character.attribute.constitution" id="createCharacter_character_attribute_constitution" class="short"  min="3" max="20" required/>
                            <label for="createCharacter_character_attribute_intelligence" class="required">Intelligence</label>
                            <input type="number" pattern="[0-9]*" name="character.attribute.intelligence" id="createCharacter_character_attribute_intelligence" class="short"  min="3" max="20" required/>
                            <label for="createCharacter_character_attribute_wisdom" class="required">Wisdom</label>
                            <input type="number" pattern="[0-9]*" name="character.attribute.wisdom" id="createCharacter_character_attribute_wisdom"  class="short"  min="3" max="20" required/>
                            <label for="createCharacter_character_attribute_charisma" class="required">Charisma</label>
                            <input type="number" pattern="[0-9]*" name="character.attribute.charisma" id="createCharacter_character_attribute_charisma"  class="short"  min="3" max="20" required/>
                        </fieldset>
                    </form>
                    <div class="buttonbar">
                        <a href="#">Cancel</a>
                        <a href="#createCharacter_class" >Previous</a>
                        <a href="#createCharacter_backstory" class="next">Next</a>
                    </div>
                </div>
            </dialog>
            <dialog class="modal"  id="createCharacter_backstory" >
                <div class="base">
                    <h2>Create a new character</h2>
                    <p class="description">Load your character</p>
                    <form class="data-createCharacter entryPanel">
                        <fieldset>
                            <legend>Character Backstory</legend>
                            <label for="createCharacter_backstory_type">Backstory Type</label>
                            <select id="createCharacter_backstory_type" name="character.backstory.type"  data-lookup="BACKSTORIES"></select>

                            <label for="createCharacter_backstory_story">Backstory</label>
                            <textarea id="createCharacter_backstory_story" name="character.backstory.story" spellcheck="true"></textarea>
                        </fieldset>
                    </form>
                    <div class="buttonbar">
                        <a href="#">Cancel</a>
                        <a href="#createCharacter_attr" >Previous</a>
                        <a href="#createCharacter_age" class="next">Next</a>
                    </div>
                </div>
            </dialog>
            <dialog class="modal"  id="createCharacter_age" >
                <div class="base">
                    <h2>Create a new character</h2>
                    <p class="description">Load your character</p>
                    <form class="data-createCharacter entryPanel">
                        <fieldset>
                            <legend>Character Biometrics</legend>
                            <label for="createCharacter_details_age">Age (in years)</label>
                            <input type="number" pattern="[0-9]*" id="createCharacter_details_age" class="short" name="character.details.age" min="0"max="100"/>

                            <label for="createCharacter_details_height">Height (in inches)</label>
                            <input type="text" id="createCharacter_details_height" name="character.details.height"/>

                            <label for="createCharacter_details_weight">Weight (in pounds)</label>
                            <input type="text" id="createCharacter_details_weight" name="character.details.weight"/>
                        </fieldset>
                    </form>
                    <div class="buttonbar">
                        <a href="#">Cancel</a>
                        <a href="#createCharacter_backstory" >Previous</a>
                        <a href="#createCharacter_colors" class="next">Next</a>
                    </div>
                </div>
            </dialog>
            <dialog class="modal" id="createCharacter_colors" >
                <div class="base">
                    <h2>Create a new character</h2>
                    <p class="description">Load your character</p>
                    <form class="data-createCharacter entryPanel">
                        <fieldset>
                            <legend>Character Details</legend>
                            <label for="createCharacter_details_eyecolor">Eye Color</label>
                            <select class="tagAlong" id="createCharacter_details_eyecolor" name="character.details.eyecolor" data-type="color" data-lookup="EYE_COLOR" data-sort="false" onchange="changeColor(event);"></select>
                            <span id="createCharacter_details_eyecolor_color" class="swatch"></span>

                            <label for="createCharacter_details_skin">Skin Color</label>
                            <select class="tagAlong"  data-type="color" id="createCharacter_details_skin" name="character.details.skin" data-lookup="SKIN_COLOR" data-sort="false" onchange="changeColor(event);"></select>
                            <span id="createCharacter_details_skin_color" class="swatch"></span>

                            <label for="createCharacter_details_hair">Hair Color</label>
                            <select class="tagAlong" data-type="color" id="createCharacter_details_hair" name="character.details.hair" data-lookup="HAIR_COLOR" data-sort="false" onchange="changeColor(event);"></select>
                            <span id="createCharacter_details_hair_color" class="swatch"></span>
                        </fieldset>
                    </form>
                    <div class="buttonbar">
                        <a href="#">Cancel</a>
                        <a href="#createCharacter_age" >Previous</a>
                        <a href="#createCharacter_skills" class="next">Next</a>
                    </div>
                </div>
            </dialog>
            <dialog class="modal"  id="createCharacter_skills" >
                <div class="base">
                    <h2>Create a new character</h2>
                    <p class="description">Load your character</p>
                    <form class="data-createCharacter entryPanel">
                        <fieldset>
                            <legend>Skills: choose <span id="createCharacter_skills_legend" data-rulemax="0"></span> more</legend>
                            <div class="skill_grid" name="character.skills" data-lookup="SKILLS"></div>
                        </fieldset>
                    </form>
                    <div class="buttonbar">
                        <a href="#">Cancel</a>
                        <a href="#createCharacter_colors" >Previous</a>
                        <a href="#createCharacter_languages" class="next">Next</a>
                    </div>
                </div>
            </dialog>
            <dialog class="modal"  id="createCharacter_languages" >
                <div class="base">
                    <h2>Create a new character</h2>
                    <p class="description">Load your character</p>
                    <form class="data-createCharacter entryPanel" >
                        <fieldset>
                            <legend>Languages: choose <span id="createCharacter_languages_legend" data-rulemax="0"></span> more</legend>
                            <div class="skill_grid" name="character.languages" data-lookup="LANGUAGES"></div>
                        </fieldset>
                    </form>
                    <div class="buttonbar">
                        <a href="#">Cancel</a>
                        <a href="#createCharacter_skills" >Previous</a>
                        <a href="#createCharacter_equipment" class="next">Next</a>
                    </div>
                </div>
            </dialog>
            <dialog class="modal" id="createCharacter_equipment" >
                <div class="base">
                    <h2>Create a new character</h2>
                    <p class="description">Load your character</p>
                    <form class="data-createCharacter entryPanel" >
                        <fieldset>
                            <legend>Character Equipment</legend>
                            <div id="createCharacter_equipment_equipment">
                            </div>
                        </fieldset>
                    </form>
                    <div class="buttonbar">
                        <a href="#">Cancel</a>
                        <a href="#createCharacter_languages">Previous</a>
                        <a href="#" class="next" onClick="setCurrentCharacter(generateDataToJSON())">Complete</a>
                    </div>
                </div>
            </dialog>

            <dialog class="modal levelUp" id="levelUp">
                <div class="base">
                    <h2>Level Up</h2>
                    <p class="description">Raise your character's level</p>
                    <form class="entryPanel">
                        <fieldset>
                            <legend>Level Up</legend>
                            <input type="radio" class="tagAlong" name="levelUpType" id="levelUp_input_oldClass" value="levelUp_oldClass" onChange="setHref('levelUp_next','#levelUp_oldClass')" checked/>
                            <label for="levelUp_input_oldClass" class="tagAlong" >Raise a current class</label>
                            <label class="reveal-if-checked" for="levelUp_class">Class to level up</label>
                            <select class="reveal-if-checked"  id="levelUp_class"  data-lookup="currentCharacter.CALC.classes" name=""></select>
                            <!-- Stupid tagAlong doesn't know when to break -->
                            <br>
                            <input type="radio" class="tagAlong" name="levelUpType" id="levelUp_input_newClass" value="levelUp_newClass" onChange="setHref('levelUp_next','#levelUp_newClass')"/>
                            <label for="levelUp_input_newClass" class="tagAlong" >Add a new class</label>
                        </fieldset>
                    </form>
                    <div class="buttonbar">
                        <a href="#">Cancel</a>
                        <a href="#levelUp_oldClass" class="next" id="levelUp_next">Next</a>
                    </div>
                </div>
            </dialog>
            <dialog class="modal levelUp" id="levelUp_oldClass" >
                <div class="base">
                    <h2>Level Up</h2>
                    <p class="description">Raise your character's level by one</p>
                    <form class="entryPanel">
                        <dl>
                            <dt class="feature-req special-req">New Features</dt>
                            <dd class="feature-req" id="levelUp_feature" />
                            <dd class="special-req" id="levelUp_special" />
                            <dt class="spell-req">New Spells</dt>
                            <dd class="spell-req" id="levelUp_spell" />
                            <dt class="ability-req">Ability Score Up</dt>
                            <dd class="ability-req">
                                <label for="levelUp_attribute">Ability to Improve</label>
                                <select  id="levelUp_attribute"  data-lookup="ATTRIBUTES"></select>
                            </dd>
                        </dl>
                    </form>
                    <div class="buttonbar">
                        <a href="#">Cancel</a>
                        <a href="#levelUp">Previous</a>
                        <a href="#" class="next" onClick="setCurrentCharacter(levelUp($('levelUp_class').value))">Level Up</a>
                    </div>
                </div>
            </dialog>
            <dialog class="modal multiClass" id="levelUp_newClass" >
                <div class="base">
                    <h2>Level Up</h2>
                    <p class="description">Choose a new class to add to this character_</p>
                    <form class="entryPanel">
                        <label for="multiClass_class">New class to add</label>
                        <select id="multiClass_class"  data-lookup="CLASSES" name=""></select>
                    </form>
                    <div class="buttonbar">
                        <a href="#">Cancel</a>
                        <a href="#levelUp">Previous</a>
                        <a href="#" class="next" onClick="setCurrentCharacter(levelUpMultiClass())">Level Up</a>
                    </div>
                </div>
            </dialog>
            <dialog class="modal" id="equipment">
                <div class="base">
                    <h2>Equipment</h2>
                    <p class="description">Add or Use equipment in your pack</p>
                    <form class="entryPanel scrollable" >
                        <fieldset>
                            <legend>Equipment</legend>
                            <div id="equipment_list" >
                            </div>
                            <button type="button" onClick="addEquipmentRow('equipment_list')">Add Item</button>
                        </fieldset>
                    </form>
                    <div class="buttonbar">
                        <a href="#">Cancel</a>
                        <a href="#" class="next" onClick="setCurrentCharacter(updateEquipment('equipment_list', currentCharacter))">Complete</a>
                    </div>
                </div>
            </dialog>
            <dialog class="modal" id="editor">
                <form method="dialog" class="base">
                    <h2  id="editor_title" >Editor</h2>
                    <p class="description"  id="editor_description" >Edit your stuff</p>
                    <div class="entryPanel columned" >
                        <label  id="editor_field"  for="editor_textarea">Edit field</label>
                        <textarea  id="editor_textarea"  spellcheck="true"></textarea>
                    </div>
                    <menu class="buttonbar">
                        <button onClick="closeDialog()">Cancel</button>
                        <button class="next" onClick="setCurrentCharacter(updateFromEditor(currentCharacter))">Complete</button>
                    </menu>
                </form>
            </dialog>


        <!-- Root Node Closing -->
        </div>
        
        <script>
            'use strict';
            if('serviceWorker' in navigator) {
                navigator.serviceWorker
                    .register('online5eCS-serviceworker.js')
                    .then(function() { console.log("Service Worker Registered"); })
                    .catch(function(error) {console.warn('Registration failed with ' + error);});
            }
        </script>

    </body>
</html>
